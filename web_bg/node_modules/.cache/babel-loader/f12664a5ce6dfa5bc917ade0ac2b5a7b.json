{"remainingRequest":"/Users/zhujunyi/Downloads/Medusa/node_modules/babel-loader/lib/index.js!/Users/zhujunyi/Downloads/Medusa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhujunyi/Downloads/Medusa/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhujunyi/Downloads/Medusa/src/components/Tinymce/components/EditorImage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhujunyi/Downloads/Medusa/src/components/Tinymce/components/EditorImage.vue","mtime":1584656670000},{"path":"/Users/zhujunyi/Downloads/Medusa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhujunyi/Downloads/Medusa/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhujunyi/Downloads/Medusa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhujunyi/Downloads/Medusa/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyIpOwoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdhcGkvcWluaXUnCnZhciBfZGVmYXVsdCA9IHsKICBuYW1lOiAnRWRpdG9yU2xpZGVVcGxvYWQnLAogIHByb3BzOiB7CiAgICBjb2xvcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcjMTg5MGZmJwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBsaXN0T2JqOiB7fSwKICAgICAgZmlsZUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2hlY2tBbGxTdWNjZXNzOiBmdW5jdGlvbiBjaGVja0FsbFN1Y2Nlc3MoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5saXN0T2JqKS5ldmVyeShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBfdGhpcy5saXN0T2JqW2l0ZW1dLmhhc1N1Y2Nlc3M7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBhcnIgPSBPYmplY3Qua2V5cyh0aGlzLmxpc3RPYmopLm1hcChmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiBfdGhpczIubGlzdE9ialt2XTsKICAgICAgfSk7CgogICAgICBpZiAoIXRoaXMuY2hlY2tBbGxTdWNjZXNzKCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKCdQbGVhc2Ugd2FpdCBmb3IgYWxsIGltYWdlcyB0byBiZSB1cGxvYWRlZCBzdWNjZXNzZnVsbHkuIElmIHRoZXJlIGlzIGEgbmV0d29yayBwcm9ibGVtLCBwbGVhc2UgcmVmcmVzaCB0aGUgcGFnZSBhbmQgdXBsb2FkIGFnYWluIScpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgnc3VjY2Vzc0NCSycsIGFycik7CiAgICAgIHRoaXMubGlzdE9iaiA9IHt9OwogICAgICB0aGlzLmZpbGVMaXN0ID0gW107CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZVN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUpIHsKICAgICAgdmFyIHVpZCA9IGZpbGUudWlkOwogICAgICB2YXIgb2JqS2V5QXJyID0gT2JqZWN0LmtleXModGhpcy5saXN0T2JqKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBvYmpLZXlBcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5saXN0T2JqW29iaktleUFycltpXV0udWlkID09PSB1aWQpIHsKICAgICAgICAgIHRoaXMubGlzdE9ialtvYmpLZXlBcnJbaV1dLnVybCA9IHJlc3BvbnNlLmZpbGVzLmZpbGU7CiAgICAgICAgICB0aGlzLmxpc3RPYmpbb2JqS2V5QXJyW2ldXS5oYXNTdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlKSB7CiAgICAgIHZhciB1aWQgPSBmaWxlLnVpZDsKICAgICAgdmFyIG9iaktleUFyciA9IE9iamVjdC5rZXlzKHRoaXMubGlzdE9iaik7CgogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gb2JqS2V5QXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMubGlzdE9ialtvYmpLZXlBcnJbaV1dLnVpZCA9PT0gdWlkKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy5saXN0T2JqW29iaktleUFycltpXV07CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgX3NlbGYgPSB0aGlzOwoKICAgICAgdmFyIF9VUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7CgogICAgICB2YXIgZmlsZU5hbWUgPSBmaWxlLnVpZDsKICAgICAgdGhpcy5saXN0T2JqW2ZpbGVOYW1lXSA9IHt9OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICBpbWcuc3JjID0gX1VSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7CgogICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfc2VsZi5saXN0T2JqW2ZpbGVOYW1lXSA9IHsKICAgICAgICAgICAgaGFzU3VjY2VzczogZmFsc2UsCiAgICAgICAgICAgIHVpZDogZmlsZS51aWQsCiAgICAgICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLAogICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0CiAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["EditorImage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"upload-container\">\n    <el-button :style=\"{background:color,borderColor:color}\" icon=\"el-icon-upload\" size=\"mini\" type=\"primary\" @click=\" dialogVisible=true\">\n      upload\n    </el-button>\n    <el-dialog :visible.sync=\"dialogVisible\">\n      <el-upload\n        :multiple=\"true\"\n        :file-list=\"fileList\"\n        :show-file-list=\"true\"\n        :on-remove=\"handleRemove\"\n        :on-success=\"handleSuccess\"\n        :before-upload=\"beforeUpload\"\n        class=\"editor-slide-upload\"\n        action=\"https://httpbin.org/post\"\n        list-type=\"picture-card\"\n      >\n        <el-button size=\"small\" type=\"primary\">\n          Click upload\n        </el-button>\n      </el-upload>\n      <el-button @click=\"dialogVisible = false\">\n        Cancel\n      </el-button>\n      <el-button type=\"primary\" @click=\"handleSubmit\">\n        Confirm\n      </el-button>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n// import { getToken } from 'api/qiniu'\n\nexport default {\n  name: 'EditorSlideUpload',\n  props: {\n    color: {\n      type: String,\n      default: '#1890ff'\n    }\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      listObj: {},\n      fileList: []\n    }\n  },\n  methods: {\n    checkAllSuccess() {\n      return Object.keys(this.listObj).every(item => this.listObj[item].hasSuccess)\n    },\n    handleSubmit() {\n      const arr = Object.keys(this.listObj).map(v => this.listObj[v])\n      if (!this.checkAllSuccess()) {\n        this.$message('Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!')\n        return\n      }\n      this.$emit('successCBK', arr)\n      this.listObj = {}\n      this.fileList = []\n      this.dialogVisible = false\n    },\n    handleSuccess(response, file) {\n      const uid = file.uid\n      const objKeyArr = Object.keys(this.listObj)\n      for (let i = 0, len = objKeyArr.length; i < len; i++) {\n        if (this.listObj[objKeyArr[i]].uid === uid) {\n          this.listObj[objKeyArr[i]].url = response.files.file\n          this.listObj[objKeyArr[i]].hasSuccess = true\n          return\n        }\n      }\n    },\n    handleRemove(file) {\n      const uid = file.uid\n      const objKeyArr = Object.keys(this.listObj)\n      for (let i = 0, len = objKeyArr.length; i < len; i++) {\n        if (this.listObj[objKeyArr[i]].uid === uid) {\n          delete this.listObj[objKeyArr[i]]\n          return\n        }\n      }\n    },\n    beforeUpload(file) {\n      const _self = this\n      const _URL = window.URL || window.webkitURL\n      const fileName = file.uid\n      this.listObj[fileName] = {}\n      return new Promise((resolve, reject) => {\n        const img = new Image()\n        img.src = _URL.createObjectURL(file)\n        img.onload = function() {\n          _self.listObj[fileName] = { hasSuccess: false, uid: file.uid, width: this.width, height: this.height }\n        }\n        resolve(true)\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.editor-slide-upload {\n  margin-bottom: 20px;\n  /deep/ .el-upload--picture-card {\n    width: 100%;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/Tinymce/components"}]}